<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# client

```go
import "github.com/SuperBuker/terraform-provider-dns-he-net/client/client"
```

## Index

- [Constants](<#constants>)
- [func getRecordsParams(domainId uint) map[string]string](<#func-getrecordsparams>)
- [func initResult(_ *resty.Client, resp *resty.Response) (err error)](<#func-initresult>)
- [func unwrapResult(_ *resty.Client, resp *resty.Response) (err error)](<#func-unwrapresult>)
- [type Client](<#type-client>)
  - [func NewClient(ctx context.Context, authAuth auth.Auth, log logging.Logger) (*Client, error)](<#func-newclient>)
  - [func newClient(ctx context.Context, authAuth auth.Auth, log logging.Logger) *Client](<#func-newclient>)
  - [func (c *Client) CreateDomain(ctx context.Context, domain string) (models.Domain, error)](<#func-client-createdomain>)
  - [func (c *Client) DeleteDomain(ctx context.Context, domain models.Domain) error](<#func-client-deletedomain>)
  - [func (c *Client) DeleteRecord(ctx context.Context, record models.RecordX) error](<#func-client-deleterecord>)
  - [func (c *Client) GetAccount() string](<#func-client-getaccount>)
  - [func (c *Client) GetDomains(ctx context.Context) ([]models.Domain, error)](<#func-client-getdomains>)
  - [func (c *Client) GetRecords(ctx context.Context, domainId uint) ([]models.Record, error)](<#func-client-getrecords>)
  - [func (c *Client) SetRecord(ctx context.Context, record models.RecordX) (models.RecordX, error)](<#func-client-setrecord>)
  - [func (c *Client) authValidation(ctx context.Context) func(*resty.Client, *resty.Request) error](<#func-client-authvalidation>)
  - [func (c *Client) autheticate(ctx context.Context) ([]*http.Cookie, error)](<#func-client-autheticate>)
  - [func (c *Client) retryIfAuth(resp *resty.Response, err error) (retry bool)](<#func-client-retryifauth>)
  - [func (c *Client) statusCheck(_ *resty.Client, resp *resty.Response) (err error)](<#func-client-statuscheck>)
  - [func (c *Client) statusCheckLog(resp *resty.Response) error](<#func-client-statuschecklog>)
- [type ErrItemNotFound](<#type-erritemnotfound>)
  - [func (e *ErrItemNotFound) Error() string](<#func-erritemnotfound-error>)
  - [func (e *ErrItemNotFound) Unwrap() []error](<#func-erritemnotfound-unwrap>)


## Constants

```go
const endpoint = "https://dns.he.net"
```

```go
const retries = 3
```

## func [getRecordsParams](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L15>)

```go
func getRecordsParams(domainId uint) map[string]string
```

getRecordsParams returns the genericquery parameters for the record operations.

## func [initResult](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L105>)

```go
func initResult(_ *resty.Client, resp *resty.Response) (err error)
```

initResult initializes the Result field to enable ResultX

## func [unwrapResult](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L114>)

```go
func unwrapResult(_ *resty.Client, resp *resty.Response) (err error)
```

unwrapResult unwraps the ResultX, parses the body if known type and sets the resp.Result

## type [Client](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L13-L19>)

Client is a client for the dns.he.net API.

```go
type Client struct {
    auth    auth.Auth
    client  *resty.Client
    account string
    status  auth.Status
    log     logging.Logger
}
```

### func [NewClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L23>)

```go
func NewClient(ctx context.Context, authAuth auth.Auth, log logging.Logger) (*Client, error)
```

NewClient returns a new client, requires a context and an auth.Auth. Autehticates the client against the API.

### func [newClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L48>)

```go
func newClient(ctx context.Context, authAuth auth.Auth, log logging.Logger) *Client
```

newClient returns a new client, handles the go\-resty client configuration.

### func \(\*Client\) [CreateDomain](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/domains.go#L33>)

```go
func (c *Client) CreateDomain(ctx context.Context, domain string) (models.Domain, error)
```

CreateDomain creates a new domain, then returns it, or an error.

### func \(\*Client\) [DeleteDomain](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/domains.go#L63>)

```go
func (c *Client) DeleteDomain(ctx context.Context, domain models.Domain) error
```

DeleteDomain deletes a domain, returns an error.

### func \(\*Client\) [DeleteRecord](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L86>)

```go
func (c *Client) DeleteRecord(ctx context.Context, record models.RecordX) error
```

DeleteRecord deletes a record, returns an error.

### func \(\*Client\) [GetAccount](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L74>)

```go
func (c *Client) GetAccount() string
```

GetAccount returns the account ID.

### func \(\*Client\) [GetDomains](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/domains.go#L14>)

```go
func (c *Client) GetDomains(ctx context.Context) ([]models.Domain, error)
```

GetDomains retrieves all domains from the API and returns them in a slice

### func \(\*Client\) [GetRecords](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L24>)

```go
func (c *Client) GetRecords(ctx context.Context, domainId uint) ([]models.Record, error)
```

GetRecords retrieves all records from the API and returns them in a slice.

### func \(\*Client\) [SetRecord](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L44>)

```go
func (c *Client) SetRecord(ctx context.Context, record models.RecordX) (models.RecordX, error)
```

SetRecord creates or updates a record, then returns it, or an error.

### func \(\*Client\) [authValidation](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L20>)

```go
func (c *Client) authValidation(ctx context.Context) func(*resty.Client, *resty.Request) error
```

### func \(\*Client\) [autheticate](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_auth.go#L19>)

```go
func (c *Client) autheticate(ctx context.Context) ([]*http.Cookie, error)
```

autheticate authenticates the client against the API on a separated go\-resty client, then returns the cookies.

### func \(\*Client\) [retryIfAuth](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L87>)

```go
func (c *Client) retryIfAuth(resp *resty.Response, err error) (retry bool)
```

retryIfAuth returns true if the request should be retried, includes pause.

### func \(\*Client\) [statusCheck](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L70>)

```go
func (c *Client) statusCheck(_ *resty.Client, resp *resty.Response) (err error)
```

### func \(\*Client\) [statusCheckLog](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/resty_hooks.go#L54>)

```go
func (c *Client) statusCheckLog(resp *resty.Response) error
```

## type [ErrItemNotFound](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L6-L8>)

ErrItemNotFound is an error that indicates a resource was not found.

```go
type ErrItemNotFound struct {
    Resource string
}
```

### func \(\*ErrItemNotFound\) [Error](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L10>)

```go
func (e *ErrItemNotFound) Error() string
```

### func \(\*ErrItemNotFound\) [Unwrap](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L14>)

```go
func (e *ErrItemNotFound) Unwrap() []error
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
