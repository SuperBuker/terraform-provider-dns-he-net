<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# client

```go
import "github.com/SuperBuker/terraform-provider-dns-he-net/client/client"
```

## Index

- [Constants](<#constants>)
- [func getRecordsParams(zoneID uint) map[string]string](<#func-getrecordsparams>)
- [func initResult(_ *resty.Client, resp *resty.Response) (err error)](<#func-initresult>)
- [func retryCondition(resp *resty.Response, err error) (retry bool)](<#func-retrycondition>)
- [func unwrapResult(_ *resty.Client, resp *resty.Response) (err error)](<#func-unwrapresult>)
- [type Client](<#type-client>)
  - [func NewClient(ctx context.Context, authAuth auth.Auth, log logging.Logger, options ...Option) (*Client, error)](<#func-newclient>)
  - [func newClient(ctx context.Context, authAuth auth.Auth, log logging.Logger, options Options) *Client](<#func-newclient>)
  - [func (c *Client) CreateZone(ctx context.Context, name string) (models.Zone, error)](<#func-client-createzone>)
  - [func (c *Client) DDNS() ddns.Client](<#func-client-ddns>)
  - [func (c *Client) DeleteRecord(ctx context.Context, record models.RecordX) error](<#func-client-deleterecord>)
  - [func (c *Client) DeleteZone(ctx context.Context, zone models.Zone) error](<#func-client-deletezone>)
  - [func (c *Client) GetAccount() string](<#func-client-getaccount>)
  - [func (c *Client) GetRecords(ctx context.Context, zoneID uint) ([]models.Record, error)](<#func-client-getrecords>)
  - [func (c *Client) GetZones(ctx context.Context) ([]models.Zone, error)](<#func-client-getzones>)
  - [func (c *Client) SetDDNSKey(ctx context.Context, dk models.DDNSKey) (string, error)](<#func-client-setddnskey>)
  - [func (c *Client) SetRecord(ctx context.Context, record models.RecordX) (models.RecordX, error)](<#func-client-setrecord>)
  - [func (c *Client) authBasic(ctx context.Context, client *resty.Client) ([]*http.Cookie, error)](<#func-client-authbasic>)
  - [func (c *Client) authOTP(ctx context.Context, client *resty.Client) error](<#func-client-authotp>)
  - [func (c *Client) authValidation(rc *resty.Client, req *resty.Request) error](<#func-client-authvalidation>)
  - [func (c *Client) autheticate(ctx context.Context) ([]*http.Cookie, error)](<#func-client-autheticate>)
  - [func (c *Client) setAccount(resp *resty.Response)](<#func-client-setaccount>)
  - [func (c *Client) statusCheck(_ *resty.Client, resp *resty.Response) (err error)](<#func-client-statuscheck>)
  - [func (c *Client) statusCheckLog(resp *resty.Response) error](<#func-client-statuschecklog>)
- [type ErrItemNotFound](<#type-erritemnotfound>)
  - [func (e *ErrItemNotFound) Error() string](<#func-erritemnotfound-error>)
  - [func (e *ErrItemNotFound) Unwrap() []error](<#func-erritemnotfound-unwrap>)
- [type Option](<#type-option>)
  - [func WithDebug() Option](<#func-withdebug>)
  - [func WithProxy(proxy string) Option](<#func-withproxy>)
  - [func WithUserAgent(ua string) Option](<#func-withuseragent>)
- [type Options](<#type-options>)
  - [func (opts Options) ApplyAuthClient(client *resty.Client) *resty.Client](<#func-options-applyauthclient>)
  - [func (opts Options) ApplyClient(client *resty.Client) *resty.Client](<#func-options-applyclient>)
  - [func (opts Options) ApplyDDNSClient(client *resty.Client) *resty.Client](<#func-options-applyddnsclient>)
  - [func (opts Options) ApplyLogger(logger logging.Logger) logging.Logger](<#func-options-applylogger>)


## Constants

```go
const endpoint = "https://dns.he.net"
```

```go
const retries = 3
```

```go
const retryDelay = 30 * time.Second
```

## func [getRecordsParams](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L15>)

```go
func getRecordsParams(zoneID uint) map[string]string
```

getRecordsParams returns the generic query parameters for the record operations.

## func [initResult](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L96>)

```go
func initResult(_ *resty.Client, resp *resty.Response) (err error)
```

initResult initializes the Result field to enable ResultX

## func [retryCondition](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L89>)

```go
func retryCondition(resp *resty.Response, err error) (retry bool)
```

retryCondition returns true if the request should be retried, includes pause.

## func [unwrapResult](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L105>)

```go
func unwrapResult(_ *resty.Client, resp *resty.Response) (err error)
```

unwrapResult unwraps the ResultX, parses the body if known type and sets the resp.Result

## type [Client](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L14-L24>)

Client is a client for the dns.he.net API.

```go
type Client struct {
    // SubObjts
    auth   auth.Auth
    client *resty.Client
    log    logging.Logger
    // State
    status  auth.Status
    account string
    // Options
    options Options
}
```

### func [NewClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L28>)

```go
func NewClient(ctx context.Context, authAuth auth.Auth, log logging.Logger, options ...Option) (*Client, error)
```

NewClient returns a new client, requires a context and an auth.Auth. Autehticates the client against the API.

### func [newClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L53>)

```go
func newClient(ctx context.Context, authAuth auth.Auth, log logging.Logger, options Options) *Client
```

newClient returns a new client, handles the go\-resty client configuration.

### func \(\*Client\) [CreateZone](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/zones.go#L33>)

```go
func (c *Client) CreateZone(ctx context.Context, name string) (models.Zone, error)
```

CreateZone creates a new zone, then returns it, or an error.

### func \(\*Client\) [DDNS](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L89>)

```go
func (c *Client) DDNS() ddns.Client
```

### func \(\*Client\) [DeleteRecord](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L86>)

```go
func (c *Client) DeleteRecord(ctx context.Context, record models.RecordX) error
```

DeleteRecord deletes a record, returns an error.

### func \(\*Client\) [DeleteZone](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/zones.go#L63>)

```go
func (c *Client) DeleteZone(ctx context.Context, zone models.Zone) error
```

DeleteZone deletes a zone, returns an error.

### func \(\*Client\) [GetAccount](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client.go#L85>)

```go
func (c *Client) GetAccount() string
```

GetAccount returns the account ID.

### func \(\*Client\) [GetRecords](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L24>)

```go
func (c *Client) GetRecords(ctx context.Context, zoneID uint) ([]models.Record, error)
```

GetRecords retrieves all records from the API and returns them in a slice.

### func \(\*Client\) [GetZones](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/zones.go#L14>)

```go
func (c *Client) GetZones(ctx context.Context) ([]models.Zone, error)
```

GetZones retrieves all zones from the API and returns them in a slice

### func \(\*Client\) [SetDDNSKey](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/ddns_key.go#L12>)

```go
func (c *Client) SetDDNSKey(ctx context.Context, dk models.DDNSKey) (string, error)
```

SetDDNSKey creates or updates a ddns domain key, then returns the result message or an error.

### func \(\*Client\) [SetRecord](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/records.go#L44>)

```go
func (c *Client) SetRecord(ctx context.Context, record models.RecordX) (models.RecordX, error)
```

SetRecord creates or updates a record, then returns it, or an error.

### func \(\*Client\) [authBasic](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_auth.go#L81>)

```go
func (c *Client) authBasic(ctx context.Context, client *resty.Client) ([]*http.Cookie, error)
```

### func \(\*Client\) [authOTP](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_auth.go#L112>)

```go
func (c *Client) authOTP(ctx context.Context, client *resty.Client) error
```

### func \(\*Client\) [authValidation](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L20>)

```go
func (c *Client) authValidation(rc *resty.Client, req *resty.Request) error
```

### func \(\*Client\) [autheticate](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_auth.go#L21>)

```go
func (c *Client) autheticate(ctx context.Context) ([]*http.Cookie, error)
```

autheticate authenticates the client against the API on a separated go\-resty client, then returns the cookies.

### func \(\*Client\) [setAccount](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_auth.go#L132>)

```go
func (c *Client) setAccount(resp *resty.Response)
```

### func \(\*Client\) [statusCheck](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L70>)

```go
func (c *Client) statusCheck(_ *resty.Client, resp *resty.Response) (err error)
```

### func \(\*Client\) [statusCheckLog](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/middlewares.go#L54>)

```go
func (c *Client) statusCheckLog(resp *resty.Response) error
```

## type [ErrItemNotFound](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L6-L8>)

ErrItemNotFound is an error that indicates a resource was not found.

```go
type ErrItemNotFound struct {
    Resource string
}
```

### func \(\*ErrItemNotFound\) [Error](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L10>)

```go
func (e *ErrItemNotFound) Error() string
```

### func \(\*ErrItemNotFound\) [Unwrap](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/errors.go#L14>)

```go
func (e *ErrItemNotFound) Unwrap() []error
```

## type [Option](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L8-L13>)

```go
type Option struct {
    ClientFn     func(*resty.Client) *resty.Client
    AuthClientFn func(*resty.Client) *resty.Client
    DDNSClientFn func(*resty.Client) *resty.Client
    LogFn        func(logging.Logger) logging.Logger
}
```

### func [WithDebug](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L81>)

```go
func WithDebug() Option
```

WithDebug sets the debug mode for the client

### func [WithProxy](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L55>)

```go
func WithProxy(proxy string) Option
```

WithProxy sets the proxy for the client

### func [WithUserAgent](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L68>)

```go
func WithUserAgent(ua string) Option
```

WithUserAgent sets the user agent for the client

## type [Options](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L15>)

```go
type Options []Option
```

### func \(Options\) [ApplyAuthClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L27>)

```go
func (opts Options) ApplyAuthClient(client *resty.Client) *resty.Client
```

### func \(Options\) [ApplyClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L18>)

```go
func (opts Options) ApplyClient(client *resty.Client) *resty.Client
```

Proc Options

### func \(Options\) [ApplyDDNSClient](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L36>)

```go
func (opts Options) ApplyDDNSClient(client *resty.Client) *resty.Client
```

### func \(Options\) [ApplyLogger](<https://github.com/SuperBuker/terraform-provider-dns-he-net/tree/master/common/client/client/blob/master/client/client/client_options.go#L45>)

```go
func (opts Options) ApplyLogger(logger logging.Logger) logging.Logger
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
